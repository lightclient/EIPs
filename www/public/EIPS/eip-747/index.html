<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="stylesheet" href="https:&#x2F;&#x2F;eips.ethereum.com&#x2F;minima.css">

        <!-- opengraph -->
        <meta property="og:locale" content="en_US" />
        <meta property="og:url" content="https:&#x2F;&#x2F;eips.ethereum.com" />
        <meta property="og:site_name" content="Ethereum Improvement Proposals" />

        <!-- twitter -->
        <meta name="twitter:card" content="summary" />
        <meta name="twitter:site" content="@ethereum" />

        <script type="application/ld+json">
            {
              "@type": "WebSite",
              "url": "https:&#x2F;&#x2F;eips.ethereum.com",
              "name": "Ethereum Improvement Proposals",
              "description": "Description",
              "@context": "https://schema.org"
            }
        </script>

        

        

<title>EIP-747: Add wallet_watchAsset to Provider</title>
<link rel="canonical" href="https:&#x2F;&#x2F;eips.ethereum.comEIPS&#x2F;eip-747.md" />
<meta property="og:title" content="EIP-747: Add wallet_watchAsset to Provider" />
<meta
    name="description"
    content="Details on Ethereum Improvement Proposal 747 (EIP-747): Add wallet_watchAsset to Provider"
/>
<meta
    property="og:description"
    content="Details on Ethereum Improvement Proposal 747 (EIP-747): Add wallet_watchAsset to Provider"
/>
<meta property="og:url" content="https:&#x2F;&#x2F;eips.ethereum.comEIPS&#x2F;eip-747.md" />
<meta name="twitter:description" content="Details on Ethereum Improvement Proposal 747 (EIP 747): Add wallet_watchAsset to Provider" />

    </head>
    <body>
        <header class="site-header">
            <div class="wrapper">
                <a class="site-title" rel="author" href="https:&#x2F;&#x2F;eips.ethereum.com">Ethereum Improvement Proposals</a>
                <nav class="site-nav">
                    <input type="checkbox" id="nav-trigger" class="nav-trigger" />
                    <label for="nav-trigger">
                        <span class="menu-icon">
                            <svg viewBox="0 0 18 15" width="18px" height="15px">
                                <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
                            </svg>
                        </span>
                    </label>

                    <div class="trigger">
                        
                            <a class="page-link" href="&#x2F;all">All</a>
                        
                            <a class="page-link" href="&#x2F;core">Core</a>
                        
                            <a class="page-link" href="&#x2F;networking">Networking</a>
                        
                            <a class="page-link" href="&#x2F;interface">Interface</a>
                        
                            <a class="page-link" href="&#x2F;erc">ERC</a>
                        
                            <a class="page-link" href="&#x2F;meta">Meta</a>
                        
                            <a class="page-link" href="&#x2F;informational">Informational</a>
                        
                    </div>
                </nav>
            </div>
        </header>
        <main class="page-content" aria-label="Content">
            <div class="wrapper">
                
<div class="home">
    <h1 class="page-heading">
        EIP-747: Add wallet_watchAsset to Provider
        <a href=""><svg role="img" aria-label="Source" xmlns="https://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><title>Source</title><path fill-rule="evenodd" d="M9.5 3L8 4.5 11.5 8 8 11.5 9.5 13 14 8 9.5 3zm-5 0L0 8l4.5 5L6 11.5 2.5 8 6 4.5 4.5 3z"/></svg></a>
    </h1>
    <table>
        <tr>
            <th>Author</th>
            <td>
    
        
        
            <a href="https://github.com/danfinlay">Dan Finlay</a>,
        
    
        
        
            <a href="https://github.com/estebanmino"> Esteban Mino</a>
        
    
</td>
        </tr>

        
          <tr>
              <th>Discussions-To</th>
              <td><a href="https:&#x2F;&#x2F;ethereum-magicians.org&#x2F;t&#x2F;eip-747-eth-watchtoken&#x2F;1048">https:&#x2F;&#x2F;ethereum-magicians.org&#x2F;t&#x2F;eip-747-eth-watchtoken&#x2F;1048</a></td>
          </tr>
        

        <tr>
            <th>Status</th>
            <td>
                Draft
                
            </td>
        </tr>

        <tr>
            <th>Type</th>
            <td>Standards Track</td>
        </tr>

        
          <tr>
              <th>Category</th>
              <td>Interface</td>
          </tr>
        

        <tr>
            <th>Created</th>
            <td>2018-08-13</td>
        </tr>

        

        
          <tr>
              <th>Requires</th>
              <td>1474</td>
          </tr>
        

        

        

        
  </table>

  
    <!--You can leave these HTML comments in your merged EIP and delete the visible duplicate text guides, they will not appear and may be helpful to refer to if you edit it again. This is the suggested template for new EIPs. Note that an EIP number will be assigned by an editor. When opening a pull request to submit your EIP, please use an abbreviated title in the filename, `eip-draft_title_abbrev.md`. The title should be 44 characters or less.-->
<h2 id="simple-summary">Simple Summary</h2>
<!--"If you can't explain it simply, you don't understand it well enough." Provide a simplified and layman-accessible explanation of the EIP.-->
<p>A method for allowing users to easily track new assets with a suggestion from sites they are visiting.</p>
<h2 id="abstract">Abstract</h2>
<!--A short (~200 word) description of the technical issue being addressed.-->
<p>Web3 JavaScript wallet browsers may implement <code>wallet_watchAsset()</code> to allow any website to suggest a token for the user's wallet to track.</p>
<h2 id="motivation">Motivation</h2>
<!--The motivation is critical for EIPs that want to change the Ethereum protocol. It should clearly explain why the existing protocol specification is inadequate to address the problem that the EIP solves. EIP submissions without sufficient motivation may be rejected outright.-->
<p>Today, one of the major uses of ethereum wallets is to acquire and track assets. Currently, each wallet either needs to pre-load a list of approved assets, or users need to be stepped through a tedious process of adding an asset for their given wallet.</p>
<p>In the first case, wallets are burdened with both the security of managing this list, as well as the bandwidth of mass polling for known assets on their wallet.</p>
<p>In the second case, the user experience is terrible.</p>
<p>By leveraging a user's existing trust with websites they are learning about assets on, we are able to decentralize the responsibility of managing a user's list of known assets.</p>
<h2 id="specification">Specification</h2>
<!--The technical specification should describe the syntax and semantics of any new feature. The specification should be detailed enough to allow competing, interoperable implementations for any of the current Ethereum platforms (go-ethereum, parity, cpp-ethereum, ethereumj, ethereumjs, and [others](https://github.com/ethereum/wiki/wiki/Clients)).-->
<p>A new method is added to web3 browsers' ethereum providers:</p>
<pre style="background-color:#2b303b;">
<code><span style="color:#c0c5ce;">
</span><span style="color:#65737e;">/**
* @param  {Object}  opts - The options specifying the asset `type` and `options` specific for each of asset.
* @returns  {Promise} success - Whether the user added the asset to their wallet.
*/
</span><span style="color:#b48ead;">async  function  </span><span style="color:#8fa1b3;">wallet_watchAsset </span><span style="color:#c0c5ce;">(
  opts
) {
</span><span style="color:#65737e;">/* Implementation would go here */
</span><span style="color:#c0c5ce;">}

</span><span style="color:#65737e;">// Sample usage:
</span><span style="color:#bf616a;">web3</span><span style="color:#c0c5ce;">.wallet.</span><span style="color:#bf616a;">watchAsset</span><span style="color:#c0c5ce;">({ </span><span style="color:#bf616a;">type</span><span style="color:#c0c5ce;">, </span><span style="color:#bf616a;">options </span><span style="color:#c0c5ce;">})
</span></code></pre>
<p>As there are several types of different assets, this method has to provide support for each of them in a separate way. If it doesn't, it should give a response according to that.</p>
<p>In the case of assets of type <code>ERC20</code>, this method works as follows.</p>
<pre style="background-color:#2b303b;">
<code><span style="color:#bf616a;">web3</span><span style="color:#c0c5ce;">.wallet.</span><span style="color:#bf616a;">watchAsset</span><span style="color:#c0c5ce;">({
	type: &#39;</span><span style="color:#a3be8c;">ERC20</span><span style="color:#c0c5ce;">&#39;,
	options: { </span><span style="color:#bf616a;">address</span><span style="color:#c0c5ce;">, </span><span style="color:#bf616a;">symbol</span><span style="color:#c0c5ce;">, decimals [, </span><span style="color:#bf616a;">image</span><span style="color:#c0c5ce;">] }
})
</span></code></pre>
<p>The <code>image</code> parameter should link to a web-standard image format (png, jpg) of a reasonable size or a <code>Base64</code> image. To establish a baseline, let's say no greater than 512x512 pixels, and no greater than 256kb. However, this can be a client-defined setting.</p>
<p>An example of use in the first case would be.</p>
<pre style="background-color:#2b303b;">
<code><span style="color:#bf616a;">web3</span><span style="color:#c0c5ce;">.wallet.</span><span style="color:#bf616a;">watchAsset</span><span style="color:#c0c5ce;">({
	type: &#39;</span><span style="color:#a3be8c;">ERC20</span><span style="color:#c0c5ce;">&#39;,
	options: {
		</span><span style="color:#bf616a;">address</span><span style="color:#c0c5ce;">,
		</span><span style="color:#bf616a;">symbol</span><span style="color:#c0c5ce;">,
		</span><span style="color:#bf616a;">decimals</span><span style="color:#c0c5ce;">,
		image: &#39;</span><span style="color:#a3be8c;">linktoimage.jpg</span><span style="color:#c0c5ce;">&#39;
	}
})
</span></code></pre>
<p>Upon calling this request, the user should be prompted with the opportunity to add this token to their wallet:</p>
<p><img src="../assets/eip-747/add-token-prompt.gif" alt="add-token-prompt 1" /></p>
<p>For <code>Base64</code> images, the user just have to add it as <code>image</code> parameter.</p>
<pre style="background-color:#2b303b;">
<code><span style="color:#b48ead;">const </span><span style="color:#bf616a;">base64image </span><span style="color:#c0c5ce;">= &#39;</span><span style="color:#a3be8c;">data:image/png;base64, ... </span><span style="color:#c0c5ce;">&#39;
</span><span style="color:#bf616a;">web3</span><span style="color:#c0c5ce;">.wallet.</span><span style="color:#bf616a;">watchAsset</span><span style="color:#c0c5ce;">({
	type: &#39;</span><span style="color:#a3be8c;">ERC20</span><span style="color:#c0c5ce;">&#39;,
	options: {
		</span><span style="color:#bf616a;">address</span><span style="color:#c0c5ce;">,
		</span><span style="color:#bf616a;">symbol</span><span style="color:#c0c5ce;">,
		</span><span style="color:#bf616a;">decimals</span><span style="color:#c0c5ce;">,
		image: </span><span style="color:#bf616a;">base64image
	</span><span style="color:#c0c5ce;">}
})
</span></code></pre>
<p>Upon calling this request, the user should be prompted with the opportunity to add this token to their wallet:</p>
<p><img src="../assets/eip-747/add-token-prompt2.gif" alt="add-token-prompt 2" /></p>
<p>If the user adds this token, it should appear somewhere in their wallet's UI, with its balance, etc.</p>
<p>As a result of the addition or not of the asset a <code>Promise</code> should be returned, indicating if the user added the asset or an error if some parameter is not valid.</p>
<p>In the case of an asset type that is not supported by the wallet, an error should appear indicating at least.</p>
<pre style="background-color:#2b303b;">
<code><span style="color:#c0c5ce;">Asset of type (type) not supported
</span></code></pre><h2 id="rationale">Rationale</h2>
<!--The rationale fleshes out the specification by describing what motivated the design and why particular design decisions were made. It should describe alternate designs that were considered and related work, e.g. how the feature is supported in other languages. The rationale may also provide evidence of consensus within the community, and should discuss important objections or concerns raised during discussion.-->
<p>Displaying a user's assets is a basic feature that every modern dapp user expects. However, keeping this list, and polling for it from the network can be costly, especially on bandwidth constrained devices.</p>
<p>Most wallets today either manage their own assets list, which they store client side, or they query a centralized API for balances, which reduces decentralization, letting that API's owner easily correlate account holders with their IP addresses.</p>
<p>Maintaining one of these assets lists becomes a political act, and maintainers can be subject to regular harassment and pressure to list otherwise unknown assets.</p>
<p>Furthermore, automatically listing assets makes assets into a sort of spam mail: Users suddenly seeing new assets that they don't care about in their wallet can be used to bombard them with information that they didn't opt into.</p>
<p>This phenomenon is exacerbated by the trend towards airdropped tokens, which has been a cause of network congestion, because spamming people with new tokens has so far been rewarded with user attention.</p>
<p>While some people might suggest we begin a TCR of trusted tokens to watch, this would not solve the client-side bandwidth issues, nor the airdropped token spam issues. What we really want is a small list of tokens the user cares about.</p>
<p>Most of the time a user is adding a asset, they learned about it on a website. At that moment, there is a natural alignment of interests, where the website wants the user to track their asset, and the user wants to track it. This is a natural point to introduce an API to easily allow these parties to collaborate, without involving the politics of the wallet's developers.</p>
<h2 id="implementation">Implementation</h2>
<!--The implementations must be completed before any EIP is given status "Final", but it need not be completed before the EIP is accepted. While there is merit to the approach of reaching consensus on the specification and rationale before writing code, the principle of "rough consensus and running code" is still useful when it comes to resolving many discussions of API details.-->
<p>One implementation in progress can be viewed <a href="https://github.com/MetaMask/metamask-extension/pull/4606">on the MetaMask GitHub repository</a>.</p>
<h2 id="copyright">Copyright</h2>
<p>Copyright and related rights waived via <a href="https://creativecommons.org/publicdomain/zero/1.0/">CC0</a>.</p>



            </div>
        </main>


        <footer class="site-footer h-card">
            <div class="wrapper">
                <h2 class="footer-heading">Ethereum Improvement Proposals</h2>
                <div class="footer-col-wrapper">
                    <div class="footer-col footer-col-1">
                        <ul class="contact-list">
                            <li class="p-name">
                                
                                GitHub User
                                
                            </li>
                            <li>
                                <a class="u-email" href="mailto:your-email@domain.com">
                                  your-email@domain.com
                                </a>
                              </li>
                            </ul>
                    </div>
                    <div class="footer-col footer-col-3">
                        <p>Description</p>
                    </div>
                </div>
            </div>
        </footer>
    </body>
</html>
