<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="stylesheet" href="https:&#x2F;&#x2F;eips.ethereum.com&#x2F;minima.css">

        <!-- opengraph -->
        <meta property="og:locale" content="en_US" />
        <meta property="og:url" content="https:&#x2F;&#x2F;eips.ethereum.com" />
        <meta property="og:site_name" content="Ethereum Improvement Proposals" />

        <!-- twitter -->
        <meta name="twitter:card" content="summary" />
        <meta name="twitter:site" content="@ethereum" />

        <script type="application/ld+json">
            {
              "@type": "WebSite",
              "url": "https:&#x2F;&#x2F;eips.ethereum.com",
              "name": "Ethereum Improvement Proposals",
              "description": "Description",
              "@context": "https://schema.org"
            }
        </script>

        

        

<title>EIP-1062: Formalize IPFS hash into ENS(Ethereum Name Service) resolver</title>
<link rel="canonical" href="https:&#x2F;&#x2F;eips.ethereum.comEIPS&#x2F;eip-1062.md" />
<meta property="og:title" content="EIP-1062: Formalize IPFS hash into ENS(Ethereum Name Service) resolver" />
<meta
    name="description"
    content="Details on Ethereum Improvement Proposal 1062 (EIP-1062): Formalize IPFS hash into ENS(Ethereum Name Service) resolver"
/>
<meta
    property="og:description"
    content="Details on Ethereum Improvement Proposal 1062 (EIP-1062): Formalize IPFS hash into ENS(Ethereum Name Service) resolver"
/>
<meta property="og:url" content="https:&#x2F;&#x2F;eips.ethereum.comEIPS&#x2F;eip-1062.md" />
<meta name="twitter:description" content="Details on Ethereum Improvement Proposal 1062 (EIP 1062): Formalize IPFS hash into ENS(Ethereum Name Service) resolver" />

    </head>
    <body>
        <header class="site-header">
            <div class="wrapper">
                <a class="site-title" rel="author" href="https:&#x2F;&#x2F;eips.ethereum.com">Ethereum Improvement Proposals</a>
                <nav class="site-nav">
                    <input type="checkbox" id="nav-trigger" class="nav-trigger" />
                    <label for="nav-trigger">
                        <span class="menu-icon">
                            <svg viewBox="0 0 18 15" width="18px" height="15px">
                                <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
                            </svg>
                        </span>
                    </label>

                    <div class="trigger">
                        
                            <a class="page-link" href="&#x2F;all">All</a>
                        
                            <a class="page-link" href="&#x2F;core">Core</a>
                        
                            <a class="page-link" href="&#x2F;networking">Networking</a>
                        
                            <a class="page-link" href="&#x2F;interface">Interface</a>
                        
                            <a class="page-link" href="&#x2F;erc">ERC</a>
                        
                            <a class="page-link" href="&#x2F;meta">Meta</a>
                        
                            <a class="page-link" href="&#x2F;informational">Informational</a>
                        
                    </div>
                </nav>
            </div>
        </header>
        <main class="page-content" aria-label="Content">
            <div class="wrapper">
                
<div class="home">
    <h1 class="page-heading">
        EIP-1062: Formalize IPFS hash into ENS(Ethereum Name Service) resolver
        <a href=""><svg role="img" aria-label="Source" xmlns="https://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><title>Source</title><path fill-rule="evenodd" d="M9.5 3L8 4.5 11.5 8 8 11.5 9.5 13 14 8 9.5 3zm-5 0L0 8l4.5 5L6 11.5 2.5 8 6 4.5 4.5 3z"/></svg></a>
    </h1>
    <table>
        <tr>
            <th>Author</th>
            <td>
    
        
        
            <a href="mailto:phyrex@portal.network">Phyrex Tsai</a>,
        
    
        
        
            <a href="https://github.com/Portal Network Tea"> Portal Network Te</a>
        
    
</td>
        </tr>

        
          <tr>
              <th>Discussions-To</th>
              <td><a href="https:&#x2F;&#x2F;ethereum-magicians.org&#x2F;t&#x2F;eip-1062-formalize-ipfs-hash-into-ens-ethereum-name-service-resolver&#x2F;281">https:&#x2F;&#x2F;ethereum-magicians.org&#x2F;t&#x2F;eip-1062-formalize-ipfs-hash-into-ens-ethereum-name-service-resolver&#x2F;281</a></td>
          </tr>
        

        <tr>
            <th>Status</th>
            <td>
                Draft
                
            </td>
        </tr>

        <tr>
            <th>Type</th>
            <td>Standards Track</td>
        </tr>

        
          <tr>
              <th>Category</th>
              <td>ERC</td>
          </tr>
        

        <tr>
            <th>Created</th>
            <td>2018-05-02</td>
        </tr>

        

        

        

        

        
  </table>

  
    <h2 id="simple-summary">Simple Summary</h2>
<p>To specify the mapping protocol between resources stored on IPFS and ENS(Ethereum Naming Service).</p>
<h2 id="abstract">Abstract</h2>
<p>The following standard details the implementation of how to combine the IPFS cryptographic hash unique fingerprint with ENS public resolver. This standard provides a functionality to get and set IPFS online resources to ENS resolver.</p>
<p>We think that this implementation is not only aim to let more developers and communities to provide more use cases, but also leverage the human-readable features to gain more user adoption accessing decentralized resources. We considered the IPFS ENS resolver mapping standard a cornerstone for building future Web3.0 service.</p>
<h2 id="motivation">Motivation</h2>
<p>To build fully decentralized web service, it’s necessary to have a decentralized file storage system. Here comes the IPFS, for three following advantages :</p>
<ul>
<li>Address large amounts of data, and has unique cryptographic hash for every record.</li>
<li>Since IPFS is also based on peer to peer network, it can be really helpful to deliver large amounts of data to users, with safer way and lower the millions of cost for the bandwidth.</li>
<li>IPFS stores files in high efficient way via tracking version history for every file, and removing the duplications across the network.</li>
</ul>
<p>Those features makes perfect match for integrating into ENS, and these make users can easily access content through ENS, and show up in the normal browser.</p>
<h2 id="specification">Specification</h2>
<p>The condition now is that the IPFS file fingerprint using base58 and in the meantime, the Ethereum uses hex in API to encode the binary data. So that need a way to process the condition requires not only we need to transfer from IPFS to Ethereum, but also need to convert it back.</p>
<p>To solve these requirements, we can use binary buffer bridging that gap.<br />
When mapping the IPFS base58 string to ENS resolver, first we convert the Base58 to binary buffer, turn the buffer to hex encrypted format, and save to the contract. Once we want to get the IPFS resources address represented by the specific ENS, we can first find the mapping information stored as hex format before, extract the hex format to binary buffer, and finally turn that to IPFS Base58 address string.</p>
<h2 id="rationale">Rationale</h2>
<p>To implement the specification, need two methods from ENS public resolver contract, when we want to store IPFS file fingerprint to contract, convert the Base58 string identifier to the hex format and invoke the <code>setMultihash</code> method below :</p>
<pre style="background-color:#2b303b;">
<code><span style="color:#c0c5ce;">function setMultihash(bytes32 node, bytes hash) public only_owner(node);
</span></code></pre>
<p>Whenever users need to visit the ENS content, we call the <code>multihash</code> method to get the IPFS hex data, transfer to the Base58 format, and return the IPFS resources to use.</p>
<pre style="background-color:#2b303b;">
<code><span style="color:#c0c5ce;">function multihash(bytes32 node) public view returns (bytes);
</span></code></pre><h2 id="test-cases">Test Cases</h2>
<p>To implement the way to transfer from base58 to hex format and the reverse one, using the ‘multihashes’ library to deal with the problem.<br />
The library link : <a href="https://www.npmjs.com/package/multihashes">https://www.npmjs.com/package/multihashes</a><br />
To implement the method transfer from IPFS(Base58) to hex format :</p>
<pre style="background-color:#2b303b;">
<code><span style="color:#b48ead;">import </span><span style="color:#bf616a;">multihash </span><span style="color:#b48ead;">from </span><span style="color:#c0c5ce;">&#39;</span><span style="color:#a3be8c;">multihashes</span><span style="color:#c0c5ce;">&#39;

</span><span style="color:#b48ead;">export const </span><span style="color:#bf616a;">toHex </span><span style="color:#c0c5ce;">= </span><span style="color:#b48ead;">function</span><span style="color:#c0c5ce;">(ipfsHash) {
  </span><span style="color:#b48ead;">let </span><span style="color:#bf616a;">buf </span><span style="color:#c0c5ce;">= </span><span style="color:#bf616a;">multihash</span><span style="color:#c0c5ce;">.</span><span style="color:#bf616a;">fromB58String</span><span style="color:#c0c5ce;">(</span><span style="color:#bf616a;">ipfsHash</span><span style="color:#c0c5ce;">);
  </span><span style="color:#b48ead;">return </span><span style="color:#c0c5ce;">&#39;</span><span style="color:#a3be8c;">0x</span><span style="color:#c0c5ce;">&#39; + </span><span style="color:#bf616a;">multihash</span><span style="color:#c0c5ce;">.</span><span style="color:#bf616a;">toHexString</span><span style="color:#c0c5ce;">(</span><span style="color:#bf616a;">buf</span><span style="color:#c0c5ce;">);
}
</span></code></pre>
<p>To implement the method transfer from hex format to IPFS(Base58) :</p>
<pre style="background-color:#2b303b;">
<code><span style="color:#b48ead;">import </span><span style="color:#bf616a;">multihash </span><span style="color:#b48ead;">from </span><span style="color:#c0c5ce;">&#39;</span><span style="color:#a3be8c;">multihashes</span><span style="color:#c0c5ce;">&#39;

</span><span style="color:#b48ead;">export const </span><span style="color:#bf616a;">toBase58 </span><span style="color:#c0c5ce;">= </span><span style="color:#b48ead;">function</span><span style="color:#c0c5ce;">(contentHash) {
  </span><span style="color:#b48ead;">let </span><span style="color:#bf616a;">hex </span><span style="color:#c0c5ce;">= </span><span style="color:#bf616a;">contentHash</span><span style="color:#c0c5ce;">.</span><span style="color:#bf616a;">substring</span><span style="color:#c0c5ce;">(</span><span style="color:#d08770;">2</span><span style="color:#c0c5ce;">)
  </span><span style="color:#b48ead;">let </span><span style="color:#bf616a;">buf </span><span style="color:#c0c5ce;">= </span><span style="color:#bf616a;">multihash</span><span style="color:#c0c5ce;">.</span><span style="color:#bf616a;">fromHexString</span><span style="color:#c0c5ce;">(</span><span style="color:#bf616a;">hex</span><span style="color:#c0c5ce;">);
  </span><span style="color:#b48ead;">return </span><span style="color:#bf616a;">multihash</span><span style="color:#c0c5ce;">.</span><span style="color:#bf616a;">toB58String</span><span style="color:#c0c5ce;">(</span><span style="color:#bf616a;">buf</span><span style="color:#c0c5ce;">);
}
</span></code></pre><h2 id="implementation">Implementation</h2>
<p>The use case can be implemented as browser extension. Users can easily download the extension, and easily get decentralized resources by just typing the ENS just like we normally type the DNS to browser the website. Solve the current pain for normal people can not easily visit the total decentralized website.</p>
<p>The workable implementation repository : <a href="https://github.com/PortalNetwork/portal-network-browser-extension">https://github.com/PortalNetwork/portal-network-browser-extension</a></p>
<h2 id="copyright">Copyright</h2>
<p>Copyright and related rights waived via <a href="https://creativecommons.org/publicdomain/zero/1.0/">CC0</a>.</p>



            </div>
        </main>


        <footer class="site-footer h-card">
            <div class="wrapper">
                <h2 class="footer-heading">Ethereum Improvement Proposals</h2>
                <div class="footer-col-wrapper">
                    <div class="footer-col footer-col-1">
                        <ul class="contact-list">
                            <li class="p-name">
                                
                                GitHub User
                                
                            </li>
                            <li>
                                <a class="u-email" href="mailto:your-email@domain.com">
                                  your-email@domain.com
                                </a>
                              </li>
                            </ul>
                    </div>
                    <div class="footer-col footer-col-3">
                        <p>Description</p>
                    </div>
                </div>
            </div>
        </footer>
    </body>
</html>
