<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="stylesheet" href="https:&#x2F;&#x2F;eips.ethereum.com&#x2F;minima.css">

        <!-- opengraph -->
        <meta property="og:locale" content="en_US" />
        <meta property="og:url" content="https:&#x2F;&#x2F;eips.ethereum.com" />
        <meta property="og:site_name" content="Ethereum Improvement Proposals" />

        <!-- twitter -->
        <meta name="twitter:card" content="summary" />
        <meta name="twitter:site" content="@ethereum" />

        <script type="application/ld+json">
            {
              "@type": "WebSite",
              "url": "https:&#x2F;&#x2F;eips.ethereum.com",
              "name": "Ethereum Improvement Proposals",
              "description": "Description",
              "@context": "https://schema.org"
            }
        </script>

        

        

<title>EIP-2028: Transaction data gas cost reduction</title>
<link rel="canonical" href="https:&#x2F;&#x2F;eips.ethereum.comEIPS&#x2F;eip-2028.md" />
<meta property="og:title" content="EIP-2028: Transaction data gas cost reduction" />
<meta
    name="description"
    content="Details on Ethereum Improvement Proposal 2028 (EIP-2028): Transaction data gas cost reduction"
/>
<meta
    property="og:description"
    content="Details on Ethereum Improvement Proposal 2028 (EIP-2028): Transaction data gas cost reduction"
/>
<meta property="og:url" content="https:&#x2F;&#x2F;eips.ethereum.comEIPS&#x2F;eip-2028.md" />
<meta name="twitter:description" content="Details on Ethereum Improvement Proposal 2028 (EIP 2028): Transaction data gas cost reduction" />

    </head>
    <body>
        <header class="site-header">
            <div class="wrapper">
                <a class="site-title" rel="author" href="https:&#x2F;&#x2F;eips.ethereum.com">Ethereum Improvement Proposals</a>
                <nav class="site-nav">
                    <input type="checkbox" id="nav-trigger" class="nav-trigger" />
                    <label for="nav-trigger">
                        <span class="menu-icon">
                            <svg viewBox="0 0 18 15" width="18px" height="15px">
                                <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
                            </svg>
                        </span>
                    </label>

                    <div class="trigger">
                        
                            <a class="page-link" href="&#x2F;all">All</a>
                        
                            <a class="page-link" href="&#x2F;core">Core</a>
                        
                            <a class="page-link" href="&#x2F;networking">Networking</a>
                        
                            <a class="page-link" href="&#x2F;interface">Interface</a>
                        
                            <a class="page-link" href="&#x2F;erc">ERC</a>
                        
                            <a class="page-link" href="&#x2F;meta">Meta</a>
                        
                            <a class="page-link" href="&#x2F;informational">Informational</a>
                        
                    </div>
                </nav>
            </div>
        </header>
        <main class="page-content" aria-label="Content">
            <div class="wrapper">
                
<div class="home">
    <h1 class="page-heading">
        EIP-2028: Transaction data gas cost reduction
        <a href=""><svg role="img" aria-label="Source" xmlns="https://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><title>Source</title><path fill-rule="evenodd" d="M9.5 3L8 4.5 11.5 8 8 11.5 9.5 13 14 8 9.5 3zm-5 0L0 8l4.5 5L6 11.5 2.5 8 6 4.5 4.5 3z"/></svg></a>
    </h1>
    <table>
        <tr>
            <th>Author</th>
            <td>
    
        
        
            <a href="https://github.com/AlexeyAkhunov">Alexey Akhunov</a>,
        
    
        
        
            <a href="mailto:eli@starkware.co">Eli Ben Sasson</a>,
        
    
        
        
            <a href="mailto:tom@starkware.co">Tom Brand</a>,
        
    
        
        
            <a href="mailto:louis@starkware.co">Louis Guthmann</a>,
        
    
        
        
            <a href="mailto:avihu@starkware.co">Avihu Levy</a>
        
    
</td>
        </tr>

        
          <tr>
              <th>Discussions-To</th>
              <td><a href="https:&#x2F;&#x2F;ethereum-magicians.org&#x2F;t&#x2F;eip-2028-calldata-gas-cost-reduction&#x2F;3280">https:&#x2F;&#x2F;ethereum-magicians.org&#x2F;t&#x2F;eip-2028-calldata-gas-cost-reduction&#x2F;3280</a></td>
          </tr>
        

        <tr>
            <th>Status</th>
            <td>
                Final
                
            </td>
        </tr>

        <tr>
            <th>Type</th>
            <td>Standards Track</td>
        </tr>

        
          <tr>
              <th>Category</th>
              <td>Core</td>
          </tr>
        

        <tr>
            <th>Created</th>
            <td>2019-05-03</td>
        </tr>

        

        

        

        

        
  </table>

  
    <h2 id="simple-summary">Simple Summary</h2>
<p>We propose to reduce the gas cost of Calldata (<code>GTXDATANONZERO</code>) from its current value of 68 gas per byte to 16 gas per byte, to be backed by mathematical modeling and empirical estimates. The mathematical model is the one used in the works of Sompolinsky and Zohar [1] and Pass, Seeman and Shelat [2], which relates network security to network delay. We shall (1) evaluate the theoretical impact of lower Calldata gas cost on network delay using this model, (2) validate the model empirically, and (3) base the proposed gas cost on our findings.</p>
<h2 id="motivation">Motivation</h2>
<p>There are a couple of main benefits to accepting this proposal and lowering gas cost of Calldata
On-Chain Scalability: Generally speaking, higher bandwidth of Calldata improves scalability, as more data can fit within a single block.</p>
<ul>
<li>Layer two scalability: Layer two scaling solutions can improve scalability by moving storage and computation off-chain, but often introduce data transmission instead.
<ul>
<li>Proof systems such as STARKs and SNARKs use a single proof that attests to the computational integrity of a large computation, say, one that processes a large batch of transactions.</li>
<li>Some solutions use fraud proofs which requires a transmission of merkle proofs.</li>
<li>Moreover, one optional data availability solution to layer two is to place data on the main chain, via Calldata.</li>
</ul>
</li>
<li>Stateless clients: The same model will be used to determine the price of the state access for the stateless client regime, which will be proposed in the State Rent (from version 4). There, it is expected that the gas cost of state accessing operation will increase roughly proportional to the extra bandwidth required to transmit the “block proofs” as well as extra processing required to verify those block proofs.</li>
</ul>
<h2 id="specification">Specification</h2>
<p>The gas per non-zero byte is reduced from 68 to 16. Gas cost of zero bytes is unchanged.</p>
<h2 id="rationale">Rationale</h2>
<p>Roughly speaking, reducing the gas cost of Calldata leads to potentially larger blocks, which increases the network delay associated with data transmission over the network. This is only part of the full network delay, other factors are block processing time (and storage access, as part of it). Increasing network delay affects security by lowering the cost of attacking the network, because at any given point in time fewer nodes are updated on the latest state of the blockchain.</p>
<p>Yonatan Sompolinsky and Aviv Zohar suggested in [1] an elegant model to relate network delay to network security, and this model is also used in the work of Rafael Pass, Lior Seeman and Abhi Shelat [2]. We briefly explain this model below, because we shall study it theoretically and validate it by empirical measurements to reach the suggested lower gas cost for Calldata.</p>
<p>The model uses the following natural parameters:</p>
<ul>
<li><em>lambda</em>  denotes the block creation rate [1/s]: We treat the process of finding a PoW
solution as a poisson process with rate <em>lambda</em>.</li>
<li><em>beta</em> - chain growth rate [1/s]: the rate at which new blocks are added to
the heaviest chain.</li>
<li><em>D</em> - block delay [s]: The time that elapses between the mining of a new block and its acceptance by all the miners (all miners switched to mining on top of that block).</li>
</ul>
<h3 id="beta-lower-bound"><em>Beta</em> Lower Bound</h3>
<p>Notice that <em>lambda</em> =&gt; <em>beta</em>, because not all blocks that are found will enter the main chain (as is the case with uncles). In [1] it was shown that for a blockchain using the longest chain rule, one may bound <em>beta</em> from below by <em>lambda</em>/ (1+ D * <em>lambda</em>). This lower bound holds in the extremal case where the topology of the network is a clique in which the delay between each pair of nodes is D, the maximal possible delay. Recording both the lower and upper bounds on <em>beta</em> we get</p>
<pre style="background-color:#2b303b;">
<code>_lambda_ &gt;= _beta_ &gt;= _lambda_ / (1 + D * _lambda_)               (*)
</code></pre>
<p>Notice, as a sanity check, that when there is no delay (D=0) then <em>beta</em> equals <em>lambda</em>, as expected.</p>
<h3 id="security-of-the-network">Security of the network</h3>
<p>An attacker attempting to reorganize the main chain needs to generate blocks at a rate that is greater than <em>beta</em>.
Fixing the difficulty level of the PoW puzzle, the total hash rate in the system is correlated to <em>lambda</em>. Thus, <em>beta</em> / <em>lambda</em> is defined as the <em>efficiency</em> of the system, as it measures the fraction of total hash power that is used to generate the main chain of the network.</p>
<p>Rearranging (*) gives the following lower bound on efficiency in terms of delay:</p>
<pre style="background-color:#2b303b;">
<code>_beta_ / _lambda_ &gt;= 1 / (1 + D * _lambda_)                 (**)
</code></pre><h3 id="the-delay-parameter-d">The <em>delay</em> parameter D</h3>
<p>The network delay depends on the location of the mining node within the network and on the current network topology (which changes dynamically), and consequently is somewhat difficult to measure directly.
Previously, Christian Decker and Roger Wattenhofer [3] showed that propagation time scales with blocksize,  and Vitalik Buterin showed that uncle rate, which is tightly related to efficiency (**) measure, also scales with block size [4].</p>
<p>However, the delay function can be decomposed into two parts D = <em>D_t</em> + <em>D_p</em>, where <em>D_t</em> is the delay caused by the transmission of the block and <em>D_p</em> is the delay caused by the processing of the block by the node. Our model and tests will examine the effect of Calldata on each of <em>D_t</em> and <em>D_p</em>, postulating that their effect is different. This may be particularly relevant for Layer 2 Scalability and for Stateless Clients (Rationales 2, 3 above) because most of the Calldata associated with these goals are Merkle authentication paths that have a large <em>D_t</em> component but relatively small <em>D_p</em> values.</p>
<h2 id="test-cases">Test Cases</h2>
<p>To suggest the gas cost of calldata we shall conduct two types of tests:</p>
<ol>
<li>Network tests, conducted on the Ethereum mainnet, used to estimate the effect on increasing block size on <em>D_p</em> and <em>D_t</em>, on the overall network delay D and the efficiency ratio (**), as well as delays between different mining pools. Those tests will include regression tests on existing data, and stress tests to introduce extreme scenarios.</li>
<li>Local tests, conducted on a single node and measuring the processing time as a function of Calldata amount and general computation limits.</li>
</ol>
<h2 id="reference-implementation">Reference Implementation</h2>
<p><a href="https://github.com/liorgold2/parity-ethereum/pull/1">Parity</a>
<a href="https://github.com/liorgold2/go-ethereum/pull/1">Geth</a></p>
<h2 id="references">References</h2>
<p>[1] Yonatan Sompolinsky, Aviv Zohar: <a href="https://eprint.iacr.org/2013/881.pdf">Secure High-Rate Transaction Processing in Bitcoin</a>. Financial Cryptography 2015: 507-527</p>
<p>[2] Rafael Pass, Lior Seeman, Abhi Shelat: <a href="https://eprint.iacr.org/2016/454.pdf">Analysis of the Blockchain Protocol in Asynchronous Networks</a>, ePrint report 2016/454</p>
<p>[3] Christian Decker, Roger Wattenhofer: <a href="https://www.gsd.inesc-id.pt/%7Eler/docencia/rcs1314/papers/P2P2013_041.pdf">Information propagation in the Bitcoin network</a>. P2P 2013: 1-10</p>
<p>[4] Vitalik Buterin: <a href="https://blog.ethereum.org/2016/10/31/uncle-rate-transaction-fee-analysis/">Uncle Rate and Transaction Fee Analysis</a></p>
<h2 id="copyright">Copyright</h2>
<p>Copyright and related rights waived via <a href="https://creativecommons.org/publicdomain/zero/1.0/">CC0</a>.</p>



            </div>
        </main>


        <footer class="site-footer h-card">
            <div class="wrapper">
                <h2 class="footer-heading">Ethereum Improvement Proposals</h2>
                <div class="footer-col-wrapper">
                    <div class="footer-col footer-col-1">
                        <ul class="contact-list">
                            <li class="p-name">
                                
                                GitHub User
                                
                            </li>
                            <li>
                                <a class="u-email" href="mailto:your-email@domain.com">
                                  your-email@domain.com
                                </a>
                              </li>
                            </ul>
                    </div>
                    <div class="footer-col footer-col-3">
                        <p>Description</p>
                    </div>
                </div>
            </div>
        </footer>
    </body>
</html>
