<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="stylesheet" href="https:&#x2F;&#x2F;eips.ethereum.com&#x2F;minima.css">

        <!-- opengraph -->
        <meta property="og:locale" content="en_US" />
        <meta property="og:url" content="https:&#x2F;&#x2F;eips.ethereum.com" />
        <meta property="og:site_name" content="Ethereum Improvement Proposals" />

        <!-- twitter -->
        <meta name="twitter:card" content="summary" />
        <meta name="twitter:site" content="@ethereum" />

        <script type="application/ld+json">
            {
              "@type": "WebSite",
              "url": "https:&#x2F;&#x2F;eips.ethereum.com",
              "name": "Ethereum Improvement Proposals",
              "description": "Description",
              "@context": "https://schema.org"
            }
        </script>

        

        

<title>EIP-1948: Non-fungible Data Token</title>
<link rel="canonical" href="https:&#x2F;&#x2F;eips.ethereum.comEIPS&#x2F;eip-1948.md" />
<meta property="og:title" content="EIP-1948: Non-fungible Data Token" />
<meta
    name="description"
    content="Details on Ethereum Improvement Proposal 1948 (EIP-1948): Non-fungible Data Token"
/>
<meta
    property="og:description"
    content="Details on Ethereum Improvement Proposal 1948 (EIP-1948): Non-fungible Data Token"
/>
<meta property="og:url" content="https:&#x2F;&#x2F;eips.ethereum.comEIPS&#x2F;eip-1948.md" />
<meta name="twitter:description" content="Details on Ethereum Improvement Proposal 1948 (EIP 1948): Non-fungible Data Token" />

    </head>
    <body>
        <header class="site-header">
            <div class="wrapper">
                <a class="site-title" rel="author" href="https:&#x2F;&#x2F;eips.ethereum.com">Ethereum Improvement Proposals</a>
                <nav class="site-nav">
                    <input type="checkbox" id="nav-trigger" class="nav-trigger" />
                    <label for="nav-trigger">
                        <span class="menu-icon">
                            <svg viewBox="0 0 18 15" width="18px" height="15px">
                                <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
                            </svg>
                        </span>
                    </label>

                    <div class="trigger">
                        
                            <a class="page-link" href="&#x2F;all">All</a>
                        
                            <a class="page-link" href="&#x2F;core">Core</a>
                        
                            <a class="page-link" href="&#x2F;networking">Networking</a>
                        
                            <a class="page-link" href="&#x2F;interface">Interface</a>
                        
                            <a class="page-link" href="&#x2F;erc">ERC</a>
                        
                            <a class="page-link" href="&#x2F;meta">Meta</a>
                        
                            <a class="page-link" href="&#x2F;informational">Informational</a>
                        
                    </div>
                </nav>
            </div>
        </header>
        <main class="page-content" aria-label="Content">
            <div class="wrapper">
                
<div class="home">
    <h1 class="page-heading">
        EIP-1948: Non-fungible Data Token
        <a href=""><svg role="img" aria-label="Source" xmlns="https://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><title>Source</title><path fill-rule="evenodd" d="M9.5 3L8 4.5 11.5 8 8 11.5 9.5 13 14 8 9.5 3zm-5 0L0 8l4.5 5L6 11.5 2.5 8 6 4.5 4.5 3z"/></svg></a>
    </h1>
    <table>
        <tr>
            <th>Author</th>
            <td>
    
        
        
            <a href="https://github.com/johannbarbie">Johann Barbie</a>,
        
    
        
        
            <a href="mailto:ben@ost.com">Ben Bollen</a>,
        
    
        
        
            <a href="https://github.com/pinkiebell"> pinkiebell</a>
        
    
</td>
        </tr>

        
          <tr>
              <th>Discussions-To</th>
              <td><a href="https:&#x2F;&#x2F;ethereum-magicians.org&#x2F;t&#x2F;erc-non-fungible-data-token&#x2F;3139">https:&#x2F;&#x2F;ethereum-magicians.org&#x2F;t&#x2F;erc-non-fungible-data-token&#x2F;3139</a></td>
          </tr>
        

        <tr>
            <th>Status</th>
            <td>
                Draft
                
            </td>
        </tr>

        <tr>
            <th>Type</th>
            <td>Standards Track</td>
        </tr>

        
          <tr>
              <th>Category</th>
              <td>ERC</td>
          </tr>
        

        <tr>
            <th>Created</th>
            <td>2019-04-18</td>
        </tr>

        

        
          <tr>
              <th>Requires</th>
              <td>721</td>
          </tr>
        

        

        

        
  </table>

  
    <h2 id="simple-summary">Simple Summary</h2>
<p>Some NFT use-cases require to have dynamic data associated with a non-fungible token that can change during its lifetime. Examples for dynamic data:</p>
<ul>
<li>cryptokitties that can change color</li>
<li>intellectual property tokens that encode rights holders</li>
<li>tokens that store data to transport them across chains</li>
</ul>
<p>The existing metadata standard does not suffice as data can only be set at minting time and not modified later.</p>
<h2 id="abstract">Abstract</h2>
<p>Non-fungible tokens (NFTs) are extended with the ability to store dynamic data. A 32 bytes data field is added and a read function allows to access it. The write function allows to update it, if the caller is the owner of the token. An event is emitted every time the data updates and the previous and new value is emitted in it.</p>
<h2 id="motivation">Motivation</h2>
<p>The proposal is made to standardize on tokens with dynamic data. Interactions with bridges for side-chains like xDAI or Plasma chains will profit from the ability to use such tokens. Protocols that build on data tokens like <a href="https://ethresear.ch/t/a-distributed-breeding-function/5264">distributed breeding</a> will be enabled.</p>
<h2 id="specification">Specification</h2>
<p>An extension of <a href="https://eips.ethereum.org/EIPS/eip-721">ERC721</a> interface with the following functions and events is suggested:</p>
<pre style="background-color:#2b303b;">
<code><span style="color:#c0c5ce;">pragma solidity ^0.5.2;

/**
 * @dev Interface of the ERC1948 contract.
 */
interface IERC1948 {

  /**
   * @dev Emitted when `oldData` is replaced with `newData` in storage of `tokenId`.
   *
   * Note that `oldData` or `newData` may be empty bytes.
   */
  event DataUpdated(uint256 indexed tokenId, bytes32 oldData, bytes32 newData);

  /**
   * @dev Reads the data of a specified token. Returns the current data in
   * storage of `tokenId`.
   *
   * @param tokenId The token to read the data off.
   *
   * @return A bytes32 representing the current data stored in the token.
   */
  function readData(uint256 tokenId) external view returns (bytes32);

  /**
   * @dev Updates the data of a specified token. Writes `newData` into storage
   * of `tokenId`.
   *
   * @param tokenId The token to write data to.
   * @param newData The data to be written to the token.
   *
   * Emits a `DataUpdated` event.
   */
  function writeData(uint256 tokenId, bytes32 newData) external;

}
</span></code></pre><h2 id="rationale">Rationale</h2>
<p>The suggested data field in the NFT is used either for storing data directly, like a counter or address. If more data is required the implementer should fall back to authenticated data structures, like merkle- or patricia-trees.</p>
<p>The proposal for this ERC stems from the <a href="https://ethresear.ch/t/a-distributed-breeding-function/5264">distributed breeding proposal</a> to allow better integration of NFTs across side-chains. <a href="https://ost.com/">ost.com</a>, <a href="https://skalelabs.com/">Skale</a>, <a href="https://poa.network/">POA</a>, and <a href="https://leapdao.org/">LeapDAO</a> have been part of the discussion.</p>
<h2 id="backwards-compatibility">Backwards Compatibility</h2>
<p>ü§∑‚Äç‚ôÇÔ∏è No related proposals are known to the author, hence no backwards compatibility to consider.</p>
<h2 id="test-cases">Test Cases</h2>
<p>Simple happy test:</p>
<pre style="background-color:#2b303b;">
<code><span style="color:#b48ead;">const </span><span style="color:#bf616a;">ERC1948 </span><span style="color:#c0c5ce;">= </span><span style="color:#bf616a;">artifacts</span><span style="color:#c0c5ce;">.</span><span style="color:#bf616a;">require</span><span style="color:#c0c5ce;">(&#39;</span><span style="color:#a3be8c;">./ERC1948.sol</span><span style="color:#c0c5ce;">&#39;);

</span><span style="color:#bf616a;">contract</span><span style="color:#c0c5ce;">(&#39;</span><span style="color:#a3be8c;">ERC1948</span><span style="color:#c0c5ce;">&#39;, (accounts) </span><span style="color:#b48ead;">=&gt; </span><span style="color:#c0c5ce;">{
  </span><span style="color:#b48ead;">const </span><span style="color:#bf616a;">firstTokenId </span><span style="color:#c0c5ce;">= </span><span style="color:#d08770;">100</span><span style="color:#c0c5ce;">;
  </span><span style="color:#b48ead;">const </span><span style="color:#bf616a;">empty </span><span style="color:#c0c5ce;">= &#39;</span><span style="color:#a3be8c;">0x0000000000000000000000000000000000000000000000000000000000000000</span><span style="color:#c0c5ce;">&#39;;
  </span><span style="color:#b48ead;">const </span><span style="color:#bf616a;">data </span><span style="color:#c0c5ce;">= &#39;</span><span style="color:#a3be8c;">0x0101010101010101010101010101010101010101010101010101010101010101</span><span style="color:#c0c5ce;">&#39;;
  </span><span style="color:#b48ead;">let </span><span style="color:#bf616a;">dataToken</span><span style="color:#c0c5ce;">;

  </span><span style="color:#bf616a;">beforeEach</span><span style="color:#c0c5ce;">(</span><span style="color:#b48ead;">async </span><span style="color:#c0c5ce;">() </span><span style="color:#b48ead;">=&gt; </span><span style="color:#c0c5ce;">{
    </span><span style="color:#bf616a;">dataToken </span><span style="color:#c0c5ce;">= </span><span style="color:#b48ead;">await </span><span style="color:#ebcb8b;">ERC1948</span><span style="color:#c0c5ce;">.</span><span style="color:#bf616a;">new</span><span style="color:#c0c5ce;">();
    </span><span style="color:#b48ead;">await </span><span style="color:#bf616a;">dataToken</span><span style="color:#c0c5ce;">.</span><span style="color:#bf616a;">mint</span><span style="color:#c0c5ce;">(</span><span style="color:#bf616a;">accounts</span><span style="color:#c0c5ce;">[</span><span style="color:#d08770;">0</span><span style="color:#c0c5ce;">], </span><span style="color:#bf616a;">firstTokenId</span><span style="color:#c0c5ce;">);
  });

  </span><span style="color:#bf616a;">it</span><span style="color:#c0c5ce;">(&#39;</span><span style="color:#a3be8c;">should allow to write and read</span><span style="color:#c0c5ce;">&#39;, </span><span style="color:#b48ead;">async </span><span style="color:#c0c5ce;">() </span><span style="color:#b48ead;">=&gt; </span><span style="color:#c0c5ce;">{
    </span><span style="color:#b48ead;">let </span><span style="color:#bf616a;">rsp </span><span style="color:#c0c5ce;">= </span><span style="color:#b48ead;">await </span><span style="color:#bf616a;">dataToken</span><span style="color:#c0c5ce;">.</span><span style="color:#bf616a;">readData</span><span style="color:#c0c5ce;">(</span><span style="color:#bf616a;">firstTokenId</span><span style="color:#c0c5ce;">);
    </span><span style="color:#bf616a;">assert</span><span style="color:#c0c5ce;">.</span><span style="color:#bf616a;">equal</span><span style="color:#c0c5ce;">(</span><span style="color:#bf616a;">rsp</span><span style="color:#c0c5ce;">, </span><span style="color:#bf616a;">empty</span><span style="color:#c0c5ce;">);
    </span><span style="color:#b48ead;">await </span><span style="color:#bf616a;">dataToken</span><span style="color:#c0c5ce;">.</span><span style="color:#bf616a;">writeData</span><span style="color:#c0c5ce;">(</span><span style="color:#bf616a;">firstTokenId</span><span style="color:#c0c5ce;">, </span><span style="color:#bf616a;">data</span><span style="color:#c0c5ce;">);
    </span><span style="color:#bf616a;">rsp </span><span style="color:#c0c5ce;">= </span><span style="color:#b48ead;">await </span><span style="color:#bf616a;">dataToken</span><span style="color:#c0c5ce;">.</span><span style="color:#bf616a;">readData</span><span style="color:#c0c5ce;">(</span><span style="color:#bf616a;">firstTokenId</span><span style="color:#c0c5ce;">);
    </span><span style="color:#bf616a;">assert</span><span style="color:#c0c5ce;">.</span><span style="color:#bf616a;">equal</span><span style="color:#c0c5ce;">(</span><span style="color:#bf616a;">rsp</span><span style="color:#c0c5ce;">, </span><span style="color:#bf616a;">data</span><span style="color:#c0c5ce;">);
  });

});
</span></code></pre><h2 id="implementation">Implementation</h2>
<p>An example implementation of the interface in solidity would look like this:</p>
<pre style="background-color:#2b303b;">
<code><span style="color:#c0c5ce;">/**
 * @dev Implementation of ERC721 token and the `IERC1948` interface.
 *
 * ERC1948 is a non-fungible token (NFT) extended with the ability to store
 * dynamic data. The data is a bytes32 field for each tokenId. If 32 bytes
 * do not suffice to store the data, an authenticated data structure (hash or
 * merkle tree) shall be used.
 */
contract ERC1948 is IERC1948, ERC721 {

  mapping(uint256 =&gt; bytes32) data;

  /**
   * @dev See `IERC1948.readData`.
   *
   * Requirements:
   *
   * - `tokenId` needs to exist.
   */
  function readData(uint256 tokenId) external view returns (bytes32) {
    require(_exists(tokenId));
    return data[tokenId];
  }

  /**
   * @dev See `IERC1948.writeData`.
   *
   * Requirements:
   *
   * - `msg.sender` needs to be owner of `tokenId`.
   */
  function writeData(uint256 tokenId, bytes32 newData) external {
    require(msg.sender == ownerOf(tokenId));
    emit DataUpdated(tokenId, data[tokenId], newData);
    data[tokenId] = newData;
  }

}
</span></code></pre><h2 id="copyright">Copyright</h2>
<p>Copyright and related rights waived via <a href="https://creativecommons.org/publicdomain/zero/1.0/">CC0</a>.</p>



            </div>
        </main>


        <footer class="site-footer h-card">
            <div class="wrapper">
                <h2 class="footer-heading">Ethereum Improvement Proposals</h2>
                <div class="footer-col-wrapper">
                    <div class="footer-col footer-col-1">
                        <ul class="contact-list">
                            <li class="p-name">
                                
                                GitHub User
                                
                            </li>
                            <li>
                                <a class="u-email" href="mailto:your-email@domain.com">
                                  your-email@domain.com
                                </a>
                              </li>
                            </ul>
                    </div>
                    <div class="footer-col footer-col-3">
                        <p>Description</p>
                    </div>
                </div>
            </div>
        </footer>
    </body>
</html>
